---
title: 'STAT 429 Project Proposal: US Housing Market'
author: "Kunal Bhardwaj,     NetID: kunal5,     Section: GR"
output:
  pdf_document: default
  html_document: default
---

## Nature of Data

Federal Reserve Economic Data (FRED) is a comprehensive database maintained by the Federal Reserve Bank of St. Louis. It provides access to a wide range of economic data, including economic indicators, financial and banking data, monetary data, and regional data for the United States. FRED aggregates data from various government agencies, international organizations, and other sources, making it a valuable resource for researchers, economists, policymakers, and the general public.


The objective is to predict the Median Sales price of houses sold in the United States based on several factors. The structure of the data is outlined below:

### Median Sales Price of Houses Sold for the United States (MSPUS) [Quarterly] [Q1'63 - Q4'23]
**OUTCOME VARIABLE**

The Median Sales Price of Houses Sold for the United States in US Dollars. The original data has not been seasonally adjusted.

```{r message=FALSE, warning=FALSE, echo=FALSE}
library(readr)
MSPUS <- read_csv("Data/MSPUS.csv",
                  col_types = cols(DATE = col_date(format = "%Y-%m-%d")))

CUSR0000SA0L2 <- read_csv("Data/CUSR0000SA0L2.csv",
                          col_types = cols(DATE = col_date(format = "%Y-%m-%d"),
                                           CUSR0000SA0L2 = col_double()))

MSACSR <- read_csv("Data/MSACSR.csv",
                   col_types = cols(DATE = col_date(format = "%Y-%m-%d")))

HOUST <- read_csv("Data/HOUST.csv",
                  col_types = cols(DATE = col_date(format = "%Y-%m-%d"),
                                   HOUST = col_number()))

RHORUSQ156N <- read_csv("Data/RHORUSQ156N.csv", 
    col_types = cols(DATE = col_date(format = "%Y-%m-%d")))

MORTGAGE30US <- read_csv("Data/MORTGAGE30US.csv",
                         col_types = cols(DATE = col_date(format = "%Y-%m-%d"),
                                          MORTGAGE30US = col_number()))
```

```{r message=FALSE, echo=FALSE}
library(astsa)
library(ggplot2)
library(ggfortify)
library(fpp2)
library(tseries) # To carry out ADF & KPSS Tests
library(lmtest) # To carry out BP-Test
library(stats) # To choose a model by AIC in a Stepwise Algorithm

mspus.ts <- ts(MSPUS$MSPUS[34:244], start = c(1971, 2), frequency = 4)
cusr.ts <- ts(CUSR0000SA0L2$CUSR0000SA0L2[98:308], start = c(1971, 2), frequency = 4)

msacsr.ts <- ts(MSACSR$MSACSR[34:244], start = c(1971, 2), frequency = 4)
houst.ts <- ts(HOUST$HOUST[50:261], start = c(1971, 2), frequency = 4, end = c(2023, 4))
rhorusq156n.ts <- ts(RHORUSQ156N$RHORUSQ156N[26:236], start = c(1971, 2), frequency = 4)
mortgage.ts <- ts(MORTGAGE30US$MORTGAGE30US, start = c(1971, 2) , frequency = 4, end = c(2023, 4))


tsplot(mspus.ts, col ="darkorange",
       main = "Median Sales Price of Houses Sold for the United States",
       ylab = "USD")

mspus.ts.adj <- mspus.ts/cusr.ts*100
lines(mspus.ts.adj, col = "mediumblue")
legend("topleft", legend = c("Real Prices", "Adjusted for Inflation"), col = c("darkorange", "mediumblue"), lty = 1)
```

From the plot of Median Sales Price of Houses Sold, we can see that there exists an obvious trend in the data.

SOURCE: U.S. Census Bureau and U.S. Department of Housing and Urban Development, Median Sales Price of Houses Sold for the United States [MSPUS], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/MSPUS

### Monthly Supply of New Houses in the United States (MSACSR) [Monthly] [Jan'63 - Dec'23]
**Predictor variable 1**

The months' supply is the ratio of new houses for sale to new houses sold. This statistic provides an indication of the size of the new for-sale inventory in relation to the number of new houses currently being sold. The months' supply indicates how long the current new for-sale inventory would last given the current sales rate if no additional new houses were built.

SOURCE: U.S. Census Bureau and U.S. Department of Housing and Urban Development, Monthly Supply of New Houses in the United States [MSACSR], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/MSACSR


### New Privately-Owned Housing Units Started: Total Units (HOUST) [Monthly] [Jan'59 - Jan'24]
**Predictor variable 2**

As provided by the Census, start occurs when excavation begins for the footings or foundation of a building. Increases in housing starts and permits indicate growing supply, which can help alleviate housing shortages and moderate price growth. Conversely, declines in construction activity may contribute to supply constraints and upward pressure on prices.

SOURCE: U.S. Census Bureau and U.S. Department of Housing and Urban Development, New Privately-Owned Housing Units Started: Total Units [HOUST], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/HOUST


### Homeownership Rate in the United States (RHORUSQ156N) [Quarterly] [Q1 '65 - Q4'23]
**Predictor variable 3**

The homeownership rate is the proportion of households that is owner-occupied.

SOURCE: U.S. Census Bureau, Homeownership Rate in the United States [RHORUSQ156N], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/RHORUSQ156N


### 30-Year Fixed Rate Mortgage Average in the United States (MORTGAGE30US) [Weekly] [Apr'71 - Feb'24]
**Predictor variable 4**

On November 17, 2022, Freddie Mac changed the methodology of the Primary Mortgage Market Survey® (PMMS®). The weekly mortgage rate is now based on applications submitted to Freddie Mac from lenders across the country.

SOURCE: Freddie Mac, 30-Year Fixed Rate Mortgage Average in the United States [MORTGAGE30US], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/MORTGAGE30US

```{r message=FALSE, echo=FALSE}
par(mfrow=c(4,1))
tsplot(msacsr.ts, col ="mediumblue",
       main = "Monthly Supply of New Houses in the United States",
       ylab = "Month's Supply")
tsplot(houst.ts, col ="limegreen",
       main = "New Privately-Owned Housing Units Started : Total Units",
       ylab = "Thousands of Units")
tsplot(rhorusq156n.ts, col ="red",
       main = "Homeownership Rate in the United States",
       ylab = "Percent")
tsplot(mortgage.ts, col ="purple",
       main = "30-Year Fixed Rate Mortgage Average in the United States", ylab = "Percent")
```

### Consumer Price Index for All Urban Consumers: All Items Less Shelter in U.S. City Average (CUSR0000SA0L2) [Monthly] [Jan'47 - Jan'24]
**Additional Variable [Not to be used in Regression]**

The Median Sales Price will be adjusted based on "Consumer Price Index (CPI) for all Urban Consumers: All items less shelter". This will give us an idea of how much house prices have risen in excess of inflation in other commodities.

SOURCE: U.S. Bureau of Labor Statistics, Consumer Price Index for All Urban Consumers: All Items Less Shelter in U.S. City Average [CUSR0000SA0L2], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/CUSR0000SA0L2

## Questions to be answered

The objective is to predict the Median Sales price of houses sold in the United States based on factors like:

i) Monthly supply of New Houses in the United States
ii) New Privately-owned Housing units started
iii) Home ownership rate in the United States
iv) 30-Year Fixed Rate Mortgage Average in the United States


The project will try to answer if the Median Sales price of houses sold in the United States is affected by any of the four above-mentioned factors or not. We will also try to answer which factors have a statistically significant effect on median prices.

## Time Series Plots

```{r warning=FALSE, echo=FALSE}
# De-trending MSPUS Time Series
mspus_trend <- lm(mspus.ts.adj ~ time(mspus.ts.adj))

par(mfrow=c(2,1))
tsplot(mspus.ts.adj, col ="darkblue",
       main = "Median Sales Price of Houses Sold for the United States [Adjusted]",
       ylab = "USD")
abline(mspus_trend, col = "red")
tsplot(resid(mspus_trend), col ="darkblue",
       main = "[De-trended] Median Sales Price of Houses Sold for the United States",
       ylab = "Residual")
```

## Plans for Analysis

**ANALYSIS A **
The time series data of median price [MSPUS] will be regressed on time (t) and four other independent variables. 
Multiple model sizes can be analyzed and the optimum model can be selected based on AIC/BIC criteria.

## Basic Ideas about Analysis C

The median price of houses can also be predicted using Spectral Analysis or ARCH/GARCH models. The spectral analysis will require decomposing the time series into its constituent frequencies while ARCH/GARCH models can be used to model the return/growth rate of median prices.